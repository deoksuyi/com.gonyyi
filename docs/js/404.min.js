/* (c) 2021 Gon Y. Yi <https://gonyyi.com/copyright> */ var maxRes,keyword,sugg,keys;function bigrams(e){for(var t=e.toLowerCase(),s=t.split(""),r=0;r<s.length;r++)s[r]=t.slice(r,r+2);return s}function similarity(e="",t=""){if(e.length>0&&t.length>0){for(var s=bigrams(e),r=bigrams(t),o=s.length+r.length,i=0,m=0;m<s.length;m++)for(var n=0;n<r.length;n++)s[m]==r[n]&&i++;if(i>0)return 2*i/o}return 0}function search(){tmpRes=[],keys.forEach(function(e){for(highestScore=0,i=0;i<e.keywords.length;i++)score=similarity(e.keywords[i],keyword),score>highestScore&&(highestScore=score);highestScore>.2&&tmpRes.push({data:e,score:highestScore})}),tmpRes.length>0?(tmpResIdx=Object.keys(tmpRes).sort(function(e,t){return tmpRes[e].score>tmpRes[t].score?1:tmpRes[e].score<tmpRes[t].score?-1:tmpRes[e].data.keywords>tmpRes[t].data.keywords?-1:tmpRes[e].data.keywords<tmpRes[t].data.keywords?1:0}).reverse(),-1!=maxRes&&tmpResIdx.length>maxRes&&(tmpResIdx=tmpResIdx.slice(0,maxRes)),tmpResIdx.length>0&&tmpResIdx.forEach(function(e){resultAdd(tmpRes[e])})):resultEmpty()}function resultAdd(e){tmp_li=document.createElement("li"),tmp_a=document.createElement("a"),tmp_a.setAttribute("href",e.data.url),tmp_a.innerHTML=e.data.url,tmp_li.appendChild(tmp_a),tmp_i=document.createElement("i"),tmp_i.innerHTML=` (${e.score.toFixed(2)})`,tmp_li.appendChild(tmp_i),sugg.appendChild(tmp_li)}function suggestURLs(e,t){keyword=window.location.pathname.replaceAll("/"," ").trim(),sugg=document.getElementById(e),maxRes=t,search()}console.log("DSYiM Search Keyword - (c) 2021 gon/y/yi");
