/* validate.js (c) Gon Y. Yi 2021 <https://gonyyi.com/copyright.txt> */ var gyyStatusC1="";function gyyStatusCls(){var e=document.createElement("style");e.type="text/css",e.innerHTML=`.${gyyStatusC1}_fail,.${gyyStatusC1}_ok,.${gyyStatusC1}_unknown \n      {display:inline-block; border:1px solid gray; background-color:gray; \n        padding:0 .5em; margin: 0 0 0em 1em; border-radius: 1em;\n        text-align: center; font-size: .8em;\n        background-color:white; color: gray;}\n      .${gyyStatusC1}_fail {border-color: #FF4A31;color:white;background-color: #FF4A31;}\n      .${gyyStatusC1}_ok {border-color: #397EFF;color:white;background-color:#397EFF;}\n      .msg {padding: .1em .5em; margin: 0 0 0 2em; border-radius:0; \n        border: .2em solid #999; border-width: 0 0 0 .4em; \n        background-color:transparent; font-size:.8em; text-transform:none;}\n      .res_error {border-color:#ff0000;} \n      .res_io {border-color:#ff9000;}\n      .res_warning {border-color:#ffdd00;}`,document.getElementsByTagName("head")[0].appendChild(e)}function gyyStatusUpBtn(e,t,r){if(URL=e.getAttribute("url"),a=document.createElement("a"),a.href="https://validator.w3.org/nu/?doc="+URL,a.innerHTML=URL,span=document.createElement("span"),span.classList.add(gyyStatusC1+"_"+t),span.innerHTML=r.length,a.appendChild(span),e.appendChild(a),r.length>0)for(i=0;i<r.length;i++)pre=document.createElement("pre"),errType=r[i].subType?r[i].subType:r[i].type,pre.classList.add("msg",`res_${errType}`),pre.innerHTML=i+". ["+errType.toUpperCase()+"] ",pre.innerHTML+=r[i].message,e.appendChild(pre)}function gyyStatusChk(e){URL=e.getAttribute("url"),fetch("https://validator.w3.org/nu/?out=json&doc="+URL).then(e=>e.json()).then(t=>{t.messages.length>0?gyyStatusUpBtn(e,"fail",t.messages):gyyStatusUpBtn(e,"ok",t.messages)}).catch(t=>{t instanceof TypeError?gyyStatusUpBtn(e,"unknown",[]):console.error("WARN: fetch("+URL+"}) ==> "+t)})}function Validate(e,t){console.log("(c) Gon Yi 2021 <https://gonyyi.com/copyright>"),gyyStatusC1=e,1==t&&gyyStatusCls(),Array.from(document.getElementsByClassName(gyyStatusC1)).forEach(e=>gyyStatusChk(e))}
