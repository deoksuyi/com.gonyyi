/* val.min.js (c) Gon Y. Yi 2021 <https://gonyyi.com/copyright.txt> */ 
let gyy_status_css_class_prefix="",gyy_status_base_url="",gyy_status_validator_url="https://html5.validator.nu";const gyy_status_copyright="Val 1.0.0 - (c) Gon Y. Yi 2021 <https://gonyyi.com/copyright>";function log(t,s){console.log(`Val [${t}] ${s}`)}function gyy_status_url(t){return t.startsWith("http://")||t.startsWith("https://")?t:`${gyy_status_base_url}${t}`}function gyy_status_set_css(){let t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=`.${gyy_status_css_class_prefix}_fail,.${gyy_status_css_class_prefix}_pending,.${gyy_status_css_class_prefix}_ok,.${gyy_status_css_class_prefix}_unknown \n      { display:inline-block; border:1px solid gray; \n        padding:0 1rem; margin: 0 1rem 0 0; border-radius: 1rem;\n        text-align: center; font-size: 2rem;\n        width: 4rem; font-family:"Helvetica","Arial",sans-serif;\n        background-color:#999; color: #fff; border-color: #999;}\n      .${gyy_status_css_class_prefix}_pending {border-color: #ddd;color:white;background-color: #ddd;}\n      .${gyy_status_css_class_prefix}_fail {border-color: #FF4A31;color:white;background-color: #FF4A31;}\n      .${gyy_status_css_class_prefix}_ok {border-color: #397EFF;color:white;background-color:#397EFF;}\n      .msg {padding: 1rem 1em; margin: 0 0 0 8rem; border-radius:0; \n        border: 1rem solid #999; border-width: 0 0 0 1rem; \n        background-color:transparent; font-size:2.4rem; text-transform:none;}\n      .res_error {border-color:#F39C12;} \n      .res_io {border-color:#E74C3C;}\n      .res_warning {border-color:#F1C40F;}`,document.getElementsByTagName("head")[0].appendChild(t)}function gyy_status_button_clear_init(t){let s=document.getElementById(`gyy_status_${t}`);return s.classList.remove(`${gyy_status_css_class_prefix}_ok`),s.classList.remove(`${gyy_status_css_class_prefix}_fail`),s.classList.remove(`${gyy_status_css_class_prefix}_pending`),s.classList.remove(`${gyy_status_css_class_prefix}_unknown`),s}function gyy_status_button_update(t,s,e,r){let _=gyy_status_button_clear_init(s);if(_.classList.add(`${gyy_status_css_class_prefix}_${e}`),_.innerHTML="unknown"===e?"err":r.length,r.length>0)for(let s=0;s<r.length;s++){let e=document.createElement("pre"),_=r[s].subType||r[s].type;e.classList.add("msg",`res_${_}`),e.innerHTML=s+". ["+_.toUpperCase()+"] ",e.innerHTML+=r[s].message,t.appendChild(e)}}function gyy_status_button(t,s,e){URL=t.getAttribute("title");{let r=document.createElement("a");r.href=`${gyy_status_validator_url}/?doc=${gyy_status_url(URL)}`;let _=document.createElement("span");_.id=`gyy_status_${s}`,_.classList.add(gyy_status_css_class_prefix+"_"+e),_.innerHTML="-",r.appendChild(_),t.appendChild(r)}{let s=document.createElement("a");s.href=gyy_status_url(URL),URL.startsWith("/")&&(URL="~"+URL),s.innerHTML=URL.replace(/\/index.html$/,"/"),t.appendChild(s)}}function gyy_status_update(t,s){if(!t)return void gyy_status_button_update(t,s,"fail",[]);let e=t.getAttribute("title");e=gyy_status_url(e),fetch(`${gyy_status_validator_url}?out=json&doc=${e}`).then(t=>t.json()).then(e=>{e.messages.length>0?gyy_status_button_update(t,s,"fail",e.messages):gyy_status_button_update(t,s,"ok",e.messages)}).catch(r=>{r instanceof TypeError?gyy_status_button_update(t,s,"unknown",[]):console.error(`WARN: fetch(${e}) ==> ${r}`)})}function VAL(t,s,e){log("INFO",gyy_status_copyright),log("INFO",`validator_url = ${gyy_status_validator_url}`),gyy_status_base_url=e,log("INFO",`css_class_prefix = ${gyy_status_css_class_prefix=t}`),log("INFO",`base_url = ${gyy_status_base_url}`),log("INFO",`UseDefaultCSS = ${s}`),1==s&&gyy_status_set_css();let r=0;Array.from(document.getElementsByClassName(gyy_status_css_class_prefix)).forEach(t=>{gyy_status_button(t,r,"pending"),gyy_status_update(t,r),r+=1})}
