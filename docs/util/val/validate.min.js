/* validate.js (c) Gon Y. Yi 2021 <https://gonyyi.com/copyright.txt> */ var gyyStatusC1="",baseURL="";function gyyStatusCls(){var e=document.createElement("style");e.type="text/css",e.innerHTML=`.${gyyStatusC1}_fail,.${gyyStatusC1}_ok,.${gyyStatusC1}_unknown \n      {display:inline-block; border:1px solid gray; background-color:gray; \n        padding:0 .5em; margin: 0 0 0em 1em; border-radius: 1em;\n        text-align: center; font-size: .8em;\n        background-color:white; color: gray;}\n      .${gyyStatusC1}_fail {border-color: #FF4A31;color:white;background-color: #FF4A31;}\n      .${gyyStatusC1}_ok {border-color: #397EFF;color:white;background-color:#397EFF;}\n      .msg {padding: .1em .5em; margin: 0 0 0 2em; border-radius:0; \n        border: .2em solid #999; border-width: 0 0 0 .4em; \n        background-color:transparent; font-size:.8em; text-transform:none;}\n      .res_error {border-color:#ff0000;} \n      .res_io {border-color:#ff9000;}\n      .res_warning {border-color:#ffdd00;}`,document.getElementsByTagName("head")[0].appendChild(e)}function gyyStatusUpBtn(e,t,n){URL=e.getAttribute("title"));{let t=document.createElement("a");t.href=baseURL+URL,t.innerHTML=URL,e.appendChild(t)}if(a=document.createElement("a"),a.href=`https://validator.w3.org/nu/?doc=${baseURL}${URL}`,span=document.createElement("span"),span.classList.add(gyyStatusC1+"_"+t),span.innerHTML=n.length,a.appendChild(span),e.appendChild(a),n.length>0)for(i=0;i<n.length;i++)pre=document.createElement("pre"),errType=n[i].subType?n[i].subType:n[i].type,pre.classList.add("msg",`res_${errType}`),pre.innerHTML=i+". ["+errType.toUpperCase()+"] ",pre.innerHTML+=n[i].message,e.appendChild(pre)}function gyyStatusChk(e){URL=e.getAttribute("title"),fetch(`https://validator.w3.org/nu/?out=json&doc=${baseURL}${URL}`).then(e=>e.json()).then(t=>{t.messages.length>0?gyyStatusUpBtn(e,"fail",t.messages):gyyStatusUpBtn(e,"ok",t.messages)}).catch(t=>{t instanceof TypeError?gyyStatusUpBtn(e,"unknown",[]):console.error("WARN: fetch("+URL+"}) ==> "+t)})}function Validate(e,t,n){console.log("(c) Gon Yi 2021 <https://gonyyi.com/copyright>"),baseURL=n,gyyStatusC1=e,1==t&&gyyStatusCls(),Array.from(document.getElementsByClassName(gyyStatusC1)).forEach(e=>gyyStatusChk(e))}
